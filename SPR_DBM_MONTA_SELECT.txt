CREATE PROCEDURE SPR_DBM_MONTA_SELECT 
(
	 @NOME_TABELA VARCHAR(150)
)
/*
	RODRIGO EDUARDO - 09/04/2013

*/
AS

IF OBJECT_ID(@NOME_TABELA) IS NOT NULL
	BEGIN

		DECLARE @CAMPOS VARCHAR(MAX)
		DECLARE @SQL VARCHAR(MAX)

		SET @CAMPOS = ''
		SET @SQL = ''


		select  @CAMPOS = @CAMPOS+CHAR(9)+ NAME +','+ CHAR(10)  from sys.syscolumns WHERE ID = OBJECT_ID(@NOME_TABELA)

		select @CAMPOS = LEFT (@CAMPOS,(LEN(@CAMPOS) - 2))

		SELECT @SQL = 'SELECT'+ CHAR(10) +  @CAMPOS +' '+ CHAR(10) 

		SELECT @SQL = @SQL + 'FROM '+CHAR(10) + CHAR(9)

		SELECT @SQL = @SQL +@NOME_TABELA

		PRINT (@SQL)
	END
ELSE
	BEGIN
		PRINT ('TABELA NÃO EXISTE NO BANCO '+DB_NAME())
	END

--EXEMPLO CHAMADA
--EXEC SPR_DBM_MONTA_SELECT 'DBM_PROSPECTS_ACUMULADOS'
